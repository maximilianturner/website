<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Article Details</title>
    <style>
        body {
            font-family: 'Times New Roman', Times, serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }
        .container {
            width: 50%;
            margin: 20px auto;
            padding: 20px;
            background-color: #ffffff;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #333;
        }
        .meta {
            color: #999;
            font-size: 0.9em;
            margin-bottom: 20px;
        }
        .content {
            color: #555;
            line-height: 1.6em;
        }
        a, .back-button {
            color: #333;
            text-decoration: none;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background-color: #333;
            color: #fff;
            margin-top: 20px;
            cursor: pointer;
            display: inline-block;
        }
        a:hover, .back-button:hover {
            text-decoration: underline;
        }
    </style>
    <script>
        // Callback function for JSONP to load the article data
        function loadArticleData(articles) {
            console.log("Received article data:", articles);
            if (articles && articles.length > 0) {
                const article = articles[0];
                if (article && article.title) {
                    document.getElementById('articleTitle').textContent = article.title;
                    document.getElementById('articleAuthor').textContent = article.author;
                    document.getElementById('articleContent').textContent = article.content;
                } else {
                    document.getElementById('articleContainer').innerHTML = '<p>Article not found.</p>';
                }
            } else {
                document.getElementById('articleContainer').innerHTML = '<p>Article not found.</p>';
            }
        }

        // Dynamically load the script for JSONP
        function loadJsonp(url) {
            const script = document.createElement('script');
            script.src = url;
            script.onerror = () => console.error('Error loading script:', url);
            document.head.appendChild(script);
        }

        // Get the timestamp from the URL
        const urlParams = new URLSearchParams(window.location.search);
        const timestamp = urlParams.get('timestamp');

        if (timestamp) {
            // Replace 'YOUR_SCRIPT_ID' with your actual Google Apps Script ID
            const scriptUrl = 'https://script.google.com/macros/s/AKfycbwEDXlCUE759nSrM-CXwvpPY44T1dr9AB3H09GjF6plK8s9lBX14O4WZJu-rppo69yS/exec?timestamp=' + timestamp + '&callback=loadArticleData';
            loadJsonp(scriptUrl);
        } else {
            document.getElementById('articleContainer').innerHTML = '<p>No article timestamp provided.</p>';
        }

        // Function to go back to index.html
        function goBack() {
            window.location.href = 'index.html';
        }
    </script>
</head>
<body>
    <div class="container" id="articleContainer">
        <h1 id="articleTitle">Loading...</h1>
        <div class="meta">By <span id="articleAuthor"></span></div>
        <div class="content" id="articleContent">Please wait, loading article...</div>
        <!-- Back Button -->
        <button class="back-button" onclick="goBack()">Back to Articles</button>
    </div>
</body>
</html>
